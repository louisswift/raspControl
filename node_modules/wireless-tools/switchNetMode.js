var fs = require('fs');
var mode = "";
function setAdhoc(){
writeFile("adhoc","mode.txt");
writeFile("source-directory /etc/network/interfaces.d\n"+"\nauto lo"+"\niface lo inet loopback"+"\niface eth0 inet dhcp"+"\nauto wlan0"+"\niface wlan0 inet static"+"\naddress 192.168.1.1"+"\nnetmask 255.255.255.0"+"\nwireless-channel 1"+"\nwireless-essid "+process.argv[2]+"\nwireless-mode ad-hoc","/etc/network/interfaces");
}

function setWifi(){
writeFile("wifi","mode.txt");
writeFile("source-directory /etc/network/interfaces.d\n"+"\nauto lo"+"\niface lo inet loopback"+"\niface eth0 inet manual"+"\nallow-hotplug wlan0"+"\niface wlan0 inet manual"+"\niface default inet dhcp"+"\nwpa-conf /etc/wpa_supplicant/wpa_supplicant.conf"+"\nallow-hotplug wlan1"+"\niface wlan1 inet manual"+"\nwpa-conf /etc/wpa_supplicant/wpa_supplicant.conf","/etc/network/interfaces");
}


function writeFile(value,file){
fs.writeFile(file, value, function (err) {
    if (err) 
        return console.log(err);
   
 });
}


fs.readFile("mode.txt", "utf8", function (error, data) {
  this.mode = data.trim();
  if(this.mode == "wifi"){
     setAdhoc();
  }else if(this.mode == "adhoc"){
     setWifi();
  }

});

